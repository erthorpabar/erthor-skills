1 限量库存 = n
2 20%概率抽中 -> 生成临时订单 且 库存-1 -> 放入 paying 待付款队列
3 放弃支付接口 -> 归还库存 -> 删除临时订单
4 超时未支付 -> 归还库存 -> 删除临时订单
5 支付接口 -> 删除临时订单 -> 生成正式订单

技术选型
1 库存放在 redis 中 使用 分布式锁防止超买超卖
2 临时订单 (paying 待付款队列 )放在redis中
3 正式订单放在 mongodb 中
4 超时自动删除 (rabbitmq 延时消息->查看待付款队列中若有就删除临时订单)

技术细节
1 使用单例
2 池连接

初始设定redis中库存
n = 100
