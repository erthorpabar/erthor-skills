# 1 发帖子系统 (文字=(知乎 贴吧) 图文=(微博 小红书) 视频=(b站 抖音) )
# 关键技术 = 长期数据库
用户A(APP) -> 浏览/发布帖子 ──> mysql数据库存储 ──> redis缓存热门内容 ──> 用户A(APP) 



# 2 聊天室 (多人实时交互 qq 微信 游戏 弹幕 会议 股价 定位)
# 关键技术 = 广播队列
                                                 ┌──> client(ws实时消息传递) -> 用户B(APP)
用户A(APP) -> client(ws实时消息传递) -> 广播队列 ──┼──> client(ws实时消息传递) -> 用户C(APP)
                                                 └──> client(ws实时消息传递) -> 用户D(APP)



# 3 延时计算任务(ai耗时生成 数据分析计算 抢购)
# 关键技术 = 任务队列 + 广播队列
用户A(提交AI任务) ──┐                         ┌──> GPU主机1 ──┐                                            ┌──> client(ws实时消息传递) -> 用户A(APP)
用户B(提交AI任务) ──┼──> 任务队列(返回任务id) ──┼──> GPU主机2 ──┼──> 结果写入数据库 -> 广播队列(通知任务完成) ──┼──> client(ws实时消息传递) -> 用户B(APP)
用户C(提交AI任务) ──┘                         └──> GPU主机3 ──┘                                            └──> client(ws实时消息传递) -> 用户C(APP)

# 事件驱动引擎
队列
[{type,data},{type,data}...]

对应处理的函数
{type1:[func1,func2],type2:[func3,func4]}


运行流程
1 数据被写入到队列
2 事件驱动引擎抓取一条信息
3 根据类型(type) 把数据(data) 给对应的函数(func)处理


# 延时计算 和 任务状态追踪系统
等待队列
[{type,data},{type,data}...]

执行队列
[{type,data},{type,data}...]

成功队列
[{type,data},{type,data}...]

失败队列
[{type,data},{type,data}...]

对应处理的函数
{type1:[func1,func2],type2:[func3,func4]}

运行流程
1 数据被写入到等待队列
2 事件驱动引擎抓取一条信息 写入到执行队列
3 根据类型(type) 把数据(data) 给对应的函数(func)处理
4 如果执行成功 放入到成功队列
5 如果执行失败 放入到失败队列